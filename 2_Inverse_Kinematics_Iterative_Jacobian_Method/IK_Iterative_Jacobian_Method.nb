(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     70126,       1967]
NotebookOptionsPosition[     69628,       1952]
NotebookOutlinePosition[     69975,       1967]
CellTagsIndexPosition[     69932,       1964]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{
   StyleBox["(*",
    FontWeight->"Plain"], 
   RowBox[{
    StyleBox[
     RowBox[{
      RowBox[{"Author", ":", 
       RowBox[{"Midhun", " ", "Varghese", "\n", 
        RowBox[{"GitHub", ":", "https", ":"}]}]}], "//", 
      RowBox[{
       RowBox[{
        RowBox[{"github", ".", "com"}], "/", "midhun"}], "-", 
       RowBox[{
       "varghese", "\[IndentingNewLine]", "\n", "This", " ", "program", " ", 
        "is", " ", "used", " ", "to", " ", "obtain", " ", "the", " ", 
        "Inverse", " ", "Kinematics", " ", "of", " ", "a", " ", "given", " ", 
        "serial", " ", "manipulator", " ", "using", " ", "the", " ", 
        "Iterative", " ", "Jacobian", " ", 
        RowBox[{"Method", ".", " ", "This"}], " ", "program", " ", "maps", 
        " ", "the", " ", "toolspace", " ", "or", " ", "the", " ", "workspace",
         " ", "of", " ", "a", " ", "manipulator", " ", "with", " ", "its", 
        " ", "joint", " ", 
        RowBox[{"space", ".", " ", "For"}], " ", "this", " ", "example"}]}]}],
     FontWeight->"Plain"], 
    StyleBox[",",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox[
     RowBox[{
      RowBox[{
       RowBox[{"a", " ", "3"}], "-", 
       RowBox[{"R", " ", 
        RowBox[{"(", 
         RowBox[{"3", " ", "Revolute", " ", "Joint"}], ")"}], " ", "Robot", 
        " ", "is", " ", "taken", " ", "as", " ", 
        RowBox[{
        "reference", ".", "   ", "\[IndentingNewLine]", "\[IndentingNewLine]",
          "Note"}], "*"}]}], ":", " ", 
      RowBox[{"Before", " ", "running", " ", "this", " ", "program"}]}],
     FontWeight->"Plain"], 
    StyleBox[",",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    RowBox[{
     RowBox[{
      StyleBox["run",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["the",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["FK_Transformation",
       FontWeight->"Plain"], 
      StyleBox["_Jacobian",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["Program",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["so",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["that",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["the",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["required",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["data",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["is",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["present",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["in",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["Mathematica",
       FontWeight->"Plain"], 
      StyleBox[" ",
       FontWeight->"Plain"], 
      StyleBox["\[IndentingNewLine]",
       FontWeight->"Plain"], "\[IndentingNewLine]", 
      StyleBox["Define",
       FontWeight->"Plain",
       FontVariations->{"CompatibilityType"->0}], 
      StyleBox[" ",
       FontWeight->"Plain",
       FontVariations->{"CompatibilityType"->0}], 
      StyleBox["function",
       FontWeight->"Plain",
       FontVariations->{"CompatibilityType"->0}], 
      StyleBox[" ",
       FontWeight->"Plain",
       FontVariations->{"CompatibilityType"->0}], 
      StyleBox["for",
       FontWeight->"Plain",
       FontVariations->{"CompatibilityType"->0}], 
      StyleBox[" ",
       FontWeight->"Plain",
       FontVariations->{"CompatibilityType"->0}], 
      StyleBox["X",
       FontWeight->"Plain",
       FontVariations->{"CompatibilityType"->0}]}], 
     StyleBox["-",
      FontWeight->"Plain",
      FontVariations->{"CompatibilityType"->0}], 
     StyleBox["Y",
      FontWeight->"Plain",
      FontVariations->{"CompatibilityType"->0}], 
     StyleBox["-",
      FontWeight->"Plain",
      FontVariations->{"CompatibilityType"->0}], 
     StyleBox[
      RowBox[{"Z", " ", "fixed", " ", "angle", " ", "rotation", " ", 
       RowBox[{"(", 
        RowBox[{"roll", "-", "pitch", "-", "yaw"}], ")"}]}],
      FontWeight->"Plain",
      FontVariations->{"CompatibilityType"->0}]}]}], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain",
    FontVariations->{"CompatibilityType"->0}], 
   StyleBox["   ",
    FontWeight->"Plain",
    FontVariations->{"CompatibilityType"->0}], 
   StyleBox["*)",
    FontWeight->"Plain",
    FontVariations->{"CompatibilityType"->0}]}], 
  StyleBox["\[IndentingNewLine]",
   FontWeight->"Plain",
   FontVariations->{"CompatibilityType"->0}], 
  StyleBox["\[IndentingNewLine]",
   FontFamily->"Arial",
   FontSize->16,
   FontWeight->"Bold"], 
  RowBox[{
   StyleBox[
    RowBox[{
     RowBox[{
      RowBox[{"RXYZ", "[", 
       RowBox[{"roll_", ",", "pitch_", ",", "yaw_"}], "]"}], " ", ":=", " ", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{"Cos", "[", "yaw", "]"}], "*", 
           RowBox[{"Cos", "[", "pitch", "]"}]}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"Cos", "[", "yaw", "]"}], "*", 
            RowBox[{"Sin", "[", "pitch", "]"}], "*", 
            RowBox[{"Sin", "[", "roll", "]"}]}], "-", 
           RowBox[{
            RowBox[{"Sin", "[", "yaw", "]"}], "*", 
            RowBox[{"Cos", "[", "roll", "]"}]}]}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"Cos", "[", "yaw", "]"}], "*", 
            RowBox[{"Sin", "[", "pitch", "]"}], "*", 
            RowBox[{"Cos", "[", "roll", "]"}]}], "+", 
           RowBox[{
            RowBox[{"Sin", "[", "yaw", "]"}], "*", 
            RowBox[{"Sin", "[", "roll", "]"}]}]}]}], "}"}], ",", "\n", 
        "                 ", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{"Sin", "[", "yaw", "]"}], "*", 
           RowBox[{"Cos", "[", "pitch", "]"}]}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"Sin", "[", "yaw", "]"}], "*", 
            RowBox[{"Sin", "[", "pitch", "]"}], "*", 
            RowBox[{"Sin", "[", "roll", "]"}]}], "+", 
           RowBox[{
            RowBox[{"Cos", "[", "yaw", "]"}], "*", 
            RowBox[{"Cos", "[", "roll", "]"}]}]}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"Sin", "[", "yaw", "]"}], "*", 
            RowBox[{"Sin", "[", "pitch", "]"}], "*", 
            RowBox[{"Cos", "[", "roll", "]"}]}], "-", 
           RowBox[{
            RowBox[{"Cos", "[", "yaw", "]"}], "*", 
            RowBox[{"Sin", "[", "roll", "]"}]}]}]}], "}"}], ",", "\n", 
        "\t\t         ", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", 
           RowBox[{"Sin", "[", "pitch", "]"}]}], ",", 
          RowBox[{
           RowBox[{"Cos", "[", "pitch", "]"}], "*", 
           RowBox[{"Sin", "[", "roll", "]"}]}], ",", 
          RowBox[{
           RowBox[{"Cos", "[", "pitch", "]"}], "*", 
           RowBox[{"Cos", "[", "roll", "]"}]}]}], "}"}]}], "}"}]}], " ", ";"}],
    FontWeight->"Plain",
    FontVariations->{"CompatibilityType"->0}], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{"(*", 
     RowBox[{
     "Set", " ", "the", " ", "current", " ", "joint", " ", "angles", " ", 
      "and", " ", "desired", " ", "change", " ", "in", " ", "Cartesian", " ", 
      "pose"}], "  ", "*)"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     StyleBox[
      RowBox[{"(", "*"}]], 
     RowBox[{
     "In", " ", "this", " ", "section", " ", "deifne", " ", "the", " ", 
      "initial", " ", "pose", " ", "or", " ", "the", " ", "orientation", " ", 
      "in", " ", "the", " ", "intial", " ", "state"}], 
     StyleBox[
      RowBox[{"*", ")"}]]}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"qinit", " ", "=", " ", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "0", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"-", "Pi"}], "/", "4"}], "}"}], ",", 
         RowBox[{"{", "0", "}"}], ",", 
         RowBox[{"{", "0", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"-", "Pi"}], "/", "4"}], "}"}], ",", 
         RowBox[{"{", "0", "}"}]}], "}"}], "   ", "//", "N"}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"q", " ", "=", " ", "qinit"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<initial q = \>\"", ",", "qinit"}], "]"}], ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{"(*", "  ", 
     RowBox[{
     "Set", " ", "desired", " ", "change", " ", "in", " ", "Cartesian", " ", 
      "position", " ", "and", " ", "orientation", " ", 
      RowBox[{
       RowBox[{"(", "pose", ")"}], "\[IndentingNewLine]", "  ", "[", 
       RowBox[{
       "In", " ", "this", " ", "case", " ", "a", " ", "1", "cm", " ", 
        "transaltion", " ", "and", " ", "a", " ", "1", "degree", " ", 
        "rotation", " ", "about", " ", "all", " ", "the", " ", "axes", " ", 
        "are", " ", "given", " ", "as", " ", "the", " ", "required", " ", 
        "changes", " ", "or", " ", "the", " ", "desired", " ", 
        RowBox[{"motion", "/", "movement"}]}], "]"}]}], "  ", "*)"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"dpdes", " ", "=", " ", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", "0.01", "}"}], ",", 
        RowBox[{"{", "0.01", "}"}], ",", 
        RowBox[{"{", "0.01", "}"}]}], "}"}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<desired dp = \>\"", ",", 
       RowBox[{"MatrixForm", "[", "dpdes", "]"}]}], "]"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"onedeg", " ", "=", " ", 
      RowBox[{
       RowBox[{"Pi", "/", "180"}], " ", "//", "N"}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontFamily->"VT100",
    FontSize->16,
    FontWeight->"Bold"], 
   StyleBox[
    RowBox[{
     RowBox[{"dRdes", " ", "=", " ", 
      RowBox[{"RXYZ", "[", 
       RowBox[{"onedeg", ",", "onedeg", ",", "onedeg"}], "]"}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<desired dR = \>\"", ",", 
       RowBox[{"MatrixForm", "[", "dRdes", "]"}]}], "]"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{"(*", 
     RowBox[{
     "This", " ", "section", " ", "finds", " ", "the", " ", "current", " ", 
      "Cartesian", " ", "Position", " ", "and", " ", "Jacobian"}], "  ", 
     "*)"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{"(*", "  ", 
     RowBox[{
      RowBox[{
       RowBox[{"Substitute", " ", "any", " ", "CONSTANT", " ", "D"}], "-", 
       RowBox[{
       "H", " ", "parameters", " ", "and", " ", "tool", " ", "vector", " ", 
        "pNT", " ", "in", " ", "p0T"}]}], ",", " ", "R0T", ",", " ", 
      RowBox[{"and", " ", "J0"}]}], "  ", "*)"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"p0T", " ", "=", " ", 
      RowBox[{"p0T", " ", "/.", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          SubscriptBox[
           StyleBox["a",
            FontWeight->"Plain"], "2"], "\[Rule]", "0.43181"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["a",
            FontWeight->"Plain"], "3"], "\[Rule]", "0.02032"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["d",
            FontWeight->"Plain"], "3"], "\[Rule]", "0.12446"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["d",
            FontWeight->"Plain"], "4"], "\[Rule]", "0.43181"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["z",
            FontWeight->"Plain"], "T"], "->", 
          StyleBox["0.2",
           FontColor->RGBColor[1, 0, 0]]}]}], "}"}]}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"R0T", " ", "=", " ", 
      RowBox[{"R0T", " ", "/.", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          SubscriptBox[
           StyleBox["a",
            FontWeight->"Plain"], "2"], "\[Rule]", "0.43181"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["a",
            FontWeight->"Plain"], "3"], "\[Rule]", "0.02032"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["d",
            FontWeight->"Plain"], "3"], "\[Rule]", "0.12446"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["d",
            FontWeight->"Plain"], "4"], "\[Rule]", "0.43181"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["z",
            FontWeight->"Plain"], "T"], "->", 
          StyleBox["0.2",
           FontColor->RGBColor[1, 0, 0]]}]}], "}"}]}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"J0", " ", "=", " ", 
      RowBox[{"J0", " ", "/.", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          SubscriptBox[
           StyleBox["a",
            FontWeight->"Plain"], "2"], "\[Rule]", "0.43181"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["a",
            FontWeight->"Plain"], "3"], "\[Rule]", "0.02032"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["d",
            FontWeight->"Plain"], "3"], "\[Rule]", "0.12446"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["d",
            FontWeight->"Plain"], "4"], "\[Rule]", "0.43181"}], ",", 
         RowBox[{
          SubscriptBox[
           StyleBox["z",
            FontWeight->"Plain"], "T"], "->", 
          StyleBox["0.2",
           FontColor->RGBColor[1, 0, 0]]}]}], "}"}]}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{"(*", "  ", 
     RowBox[{
      RowBox[{
      "Initialize", " ", "initial", " ", "values", " ", "of", " ", "joint", 
       " ", "variables", " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"d", "[", "i", "]"}], " ", "or", " ", 
         RowBox[{"\[Theta]", "[", "i", "]"}]}], ")"}], " ", "in", " ", 
       "p0Tcurrent"}], ",", " ", "R0Tcurrent", ",", " ", 
      RowBox[{"and", " ", "J0current", "\[IndentingNewLine]", 
       RowBox[{"NOTE", ":", "  ", 
        RowBox[{
        "You", " ", "have", " ", "to", " ", "change", " ", "these", " ", 
         "next", " ", "three", " ", "lines", " ", "if", " ", "your", " ", 
         "variables", " ", "include", " ", 
         RowBox[{
          RowBox[{"d", "[", "i", "]"}], "'"}], "s"}]}]}]}], "  ", "*)"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"p0Tcurrent", " ", "=", " ", 
      RowBox[{"p0T", " ", "/.", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"\[Theta]", "[", "1", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "2", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"2", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "3", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"3", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "4", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"4", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "5", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"5", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "6", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"6", ",", "1"}], "]"}], "]"}]}]}], "}"}]}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"R0Tcurrent", " ", "=", " ", 
      RowBox[{"R0T", " ", "/.", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"\[Theta]", "[", "1", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "2", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"2", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "3", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"3", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "4", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"4", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "5", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"5", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "6", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"6", ",", "1"}], "]"}], "]"}]}]}], "}"}]}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"J0current", " ", "=", " ", 
      RowBox[{"J0", "/.", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"\[Theta]", "[", "1", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "2", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"2", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "3", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"3", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "4", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"4", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "5", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"5", ",", "1"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"\[Theta]", "[", "6", "]"}], "\[Rule]", 
          RowBox[{"q", "[", 
           RowBox[{"[", 
            RowBox[{"6", ",", "1"}], "]"}], "]"}]}]}], "}"}]}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<initial p0T = \>\"", ",", 
       RowBox[{"MatrixForm", "[", "p0Tcurrent", "]"}]}], "]"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<initial R0T = \>\"", ",", 
       RowBox[{"MatrixForm", "[", "R0Tcurrent", "]"}]}], "]"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<initial J0 = \>\"", ",", 
       RowBox[{"MatrixForm", "[", "J0current", "]"}]}], "]"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"rankJ", " ", "=", " ", 
      RowBox[{"MatrixRank", "[", "J0current", "]"}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<rankJ = \>\"", ",", "rankJ"}], "]"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{"(*", "  ", 
     RowBox[{
      RowBox[{
       RowBox[{
       "Use", " ", "the", " ", "pseudoinverse", " ", "to", " ", "calculate", 
        " ", "the", " ", "Jacobian", " ", "in", " ", "case", " ", "it", " ", 
        "is", " ", "singular"}], ";", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"if", " ", "DOF"}], "=", "6"}]}], ",", " ", 
      RowBox[{
      "then", " ", "the", " ", "pseudoinverse", " ", "of", " ", "J", " ", 
       "is", " ", "the", " ", "same", " ", "as", " ", "the", " ", "inverse", 
       " ", "of", " ", "J"}]}], " ", "*)"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"JJT", " ", "=", " ", 
      RowBox[{"J0current", ".", 
       RowBox[{"Transpose", "[", "J0current", "]"}]}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Manipulability", " ", "=", " ", 
      RowBox[{"Sqrt", "[", 
       RowBox[{"Det", "[", "JJT", "]"}], "]"}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<Manipulability = \>\"", ",", "Manipulability"}], "]"}], 
     " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Jpseudoinverse", "=", 
      RowBox[{"PseudoInverse", "[", "J0current", "]"}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Jpseudoinverse", " ", "=", " ", 
      RowBox[{"Chop", "[", "Jpseudoinverse", "]"}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<initial Jpseudoinverse = \>\"", ",", 
       RowBox[{"MatrixForm", "[", "Jpseudoinverse", "]"}]}], "]"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], "\[IndentingNewLine]", 
   StyleBox[
    RowBox[{"(*", "  ", 
     RowBox[{
     "Find", " ", "desired", " ", "Cartesian", " ", "Position", " ", "and", 
      " ", "Orientation"}], "  ", "*)"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"p0Tdes", " ", "=", " ", 
      RowBox[{"p0Tcurrent", " ", "+", " ", "dpdes"}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"R0Tdes", " ", "=", " ", 
      RowBox[{"dRdes", ".", "R0Tcurrent"}]}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<p0Tdes = \>\"", ",", 
       RowBox[{"MatrixForm", "[", "p0Tdes", "]"}]}], "]"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox[
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"\"\<R0Tdes = \>\"", ",", 
       RowBox[{"MatrixForm", "[", "R0Tdes", "]"}]}], "]"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"]}]}]], "Input",
 CellChangeTimes->{{3.779884150804839*^9, 3.779884160783783*^9}, {
   3.7798848091371922`*^9, 3.779884814943372*^9}, {3.7798848524404097`*^9, 
   3.7798848528942976`*^9}, 3.7798851285706797`*^9, {3.779885276611758*^9, 
   3.779885315817783*^9}, {3.7798854355592546`*^9, 3.7798855263400393`*^9}, {
   3.7798862414022346`*^9, 3.779886242613177*^9}, {3.7798862903004475`*^9, 
   3.779886290778721*^9}, {3.779886354927258*^9, 3.7798863723241997`*^9}, {
   3.779886410747139*^9, 3.779886436529377*^9}, {3.779886598219407*^9, 
   3.779886679918563*^9}, {3.779886737423172*^9, 3.779886768352049*^9}, {
   3.7798868280232234`*^9, 3.7798868284680424`*^9}, {3.8062530143106685`*^9, 
   3.806253087802394*^9}, {3.8062531398677125`*^9, 3.806253149113738*^9}, {
   3.8062532140346837`*^9, 3.8062532279700165`*^9}, {3.806253267402418*^9, 
   3.8062533111854553`*^9}, {3.8062533469618244`*^9, 3.806253496596218*^9}, 
   3.806253541923339*^9, {3.8062535730108995`*^9, 3.806253637618314*^9}, 
   3.80625369089785*^9, {3.80625372410044*^9, 3.8062538204653745`*^9}, {
   3.806331354608046*^9, 3.80633177985598*^9}, {3.806331987217331*^9, 
   3.8063319879967623`*^9}},
 CellLabel->
  "In[166]:=",ExpressionUUID->"079748e6-0c27-499e-9e7f-feb9e37b6581"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.779886210268979*^9, 
  3.77988621033018*^9}},ExpressionUUID->"0575eaf9-9f08-4dc9-9106-\
ae698354c237"],

Cell[BoxData[
 RowBox[{
  StyleBox[
   RowBox[{
    StyleBox[
     RowBox[{"(", "*"}]], 
    RowBox[{
    "This", " ", "section", " ", "initializes", " ", "the", " ", "vectors", 
     " ", "and", " ", "iteration", " ", "number"}], 
    StyleBox[
     RowBox[{"*", ")"}]]}],
   FontWeight->"Plain"], 
  StyleBox["\[IndentingNewLine]",
   FontWeight->"Plain"], 
  RowBox[{
   StyleBox[
    RowBox[{
     RowBox[{"dpsi", " ", "=", " ", 
      RowBox[{"Table", "[", 
       RowBox[{"0", ",", 
        RowBox[{"{", "3", "}"}], ",", 
        RowBox[{"{", "1", "}"}]}], "]"}]}], " ", ";"}],
    FontWeight->"Plain"], "\[IndentingNewLine]", 
   StyleBox[
    RowBox[{
     RowBox[{"dx", " ", "=", " ", 
      RowBox[{"Table", "[", 
       RowBox[{"0", ",", 
        RowBox[{"{", "6", "}"}], ",", 
        RowBox[{"{", "1", "}"}]}], "]"}]}], " ", ";"}],
    FontWeight->"Plain"], "\[IndentingNewLine]", 
   StyleBox[
    RowBox[{
     RowBox[{"iteration", " ", "=", " ", "0"}], " ", ";"}],
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", " ", "START"}]}]}]}]}]}]}], " ", 
     RowBox[{
      RowBox[{"ITERATION", " ", "--"}], "--"}], 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", "-"}]}]}]}]}]}]}]}]}]}]}], "  ", "*)"}], 
   StyleBox["\[IndentingNewLine]",
    FontWeight->"Plain"], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     StyleBox["While",
      FontWeight->"Plain"], 
     StyleBox["[",
      FontWeight->"Plain"], 
     RowBox[{
      StyleBox[
       RowBox[{"iteration", "<", "3"}],
       FontWeight->"Plain"], 
      StyleBox[",",
       FontWeight->"Plain"], 
      StyleBox["\[IndentingNewLine]",
       FontWeight->"Plain"], 
      RowBox[{
       StyleBox["{",
        FontWeight->"Plain"], 
       StyleBox["\[IndentingNewLine]",
        FontWeight->"Plain"], 
       StyleBox[
        RowBox[{"(*", "  ", 
         RowBox[{"increment", " ", "iteration", " ", "number"}], "  ", "*)"}],
        FontWeight->"Plain"], 
       StyleBox["\[IndentingNewLine]",
        FontWeight->"Plain"], 
       RowBox[{
        StyleBox[
         RowBox[{"iteration", " ", "=", " ", 
          RowBox[{"iteration", " ", "+", " ", "1"}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{
          "\"\<=====> ITERATION # \>\"", ",", "iteration", ",", 
           "\"\< <=====\>\""}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontFamily->"VT100",
         FontSize->16,
         FontWeight->"Bold"], 
        StyleBox[
         RowBox[{"(*", "  ", 
          RowBox[{
           RowBox[{"STEP", " ", "1"}], ":", "  ", 
           RowBox[{
           "Find", " ", "current", " ", "Cartesian", " ", "Position", 
            "\[IndentingNewLine]", 
            RowBox[{"NOTE", ":", "  ", 
             RowBox[{
             "You", " ", "have", " ", "to", " ", "change", " ", "these", " ", 
              "next", " ", "two", " ", "lines", " ", "if", " ", "your", " ", 
              "variables", " ", "include", " ", 
              RowBox[{
               RowBox[{"d", "[", "i", "]"}], "'"}], "s"}]}]}]}], "  ", "*)"}],
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"p0Tcurrent", " ", "=", " ", 
          RowBox[{"p0T", " ", "/.", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"\[Theta]", "[", "1", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "2", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"2", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "3", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"3", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "4", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"4", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "5", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"5", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "6", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"6", ",", "1"}], "]"}], "]"}]}]}], "}"}]}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"R0Tcurrent", " ", "=", " ", 
          RowBox[{"R0T", " ", "/.", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"\[Theta]", "[", "1", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "2", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"2", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "3", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"3", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "4", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"4", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "5", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"5", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "6", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"6", ",", "1"}], "]"}], "]"}]}]}], "}"}]}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<p0Tcurrent = \>\"", ",", 
           RowBox[{"MatrixForm", "[", "p0Tcurrent", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<R0Tcurrent = \>\"", ",", 
           RowBox[{"MatrixForm", "[", "R0Tcurrent", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"(*", "  ", 
          RowBox[{
           RowBox[{"STEP", " ", "2"}], ":", "  ", 
           RowBox[{
           "Find", " ", "difference", " ", "between", " ", "actual", " ", 
            "and", " ", "desired", " ", "Cartesian", " ", "pose"}]}], "  ", 
          "*)"}],
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"dp", " ", "=", " ", 
          RowBox[{"p0Tdes", " ", "-", " ", "p0Tcurrent"}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<dp = \>\"", ",", 
           RowBox[{"MatrixForm", "[", "dp", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"dR", " ", "=", " ", 
          RowBox[{"R0Tdes", ".", 
           RowBox[{"Inverse", "[", "R0Tcurrent", "]"}]}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<dR = \>\"", ",", 
           RowBox[{"MatrixForm", "[", "dR", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{
          RowBox[{"dpsi", "[", 
           RowBox[{"[", 
            RowBox[{"1", ",", "1"}], "]"}], "]"}], " ", "=", " ", 
          RowBox[{"dR", "[", 
           RowBox[{"[", 
            RowBox[{"3", ",", "2"}], "]"}], "]"}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{
          RowBox[{"dpsi", "[", 
           RowBox[{"[", 
            RowBox[{"2", ",", "1"}], "]"}], "]"}], " ", "=", " ", 
          RowBox[{"dR", "[", 
           RowBox[{"[", 
            RowBox[{"1", ",", "3"}], "]"}], "]"}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{
          RowBox[{"dpsi", "[", 
           RowBox[{"[", 
            RowBox[{"3", ",", "1"}], "]"}], "]"}], " ", "=", " ", 
          RowBox[{"dR", "[", 
           RowBox[{"[", 
            RowBox[{"2", ",", "1"}], "]"}], "]"}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<dpsi = \>\"", ",", 
           RowBox[{"MatrixForm", "[", "dpsi", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"i", "=", "1"}], ",", " ", 
           RowBox[{"i", "<=", "3"}], ",", 
           RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"dx", "[", 
               RowBox[{"[", 
                RowBox[{"i", ",", "1"}], "]"}], "]"}], " ", "=", " ", 
              RowBox[{"dp", "[", 
               RowBox[{"[", 
                RowBox[{"i", ",", "1"}], "]"}], "]"}]}], " ", ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"dx", "[", 
               RowBox[{"[", 
                RowBox[{
                 RowBox[{"i", "+", "3"}], ",", "1"}], "]"}], "]"}], " ", "=", 
              " ", 
              RowBox[{"dpsi", "[", 
               RowBox[{"[", 
                RowBox[{"i", ",", "1"}], "]"}], "]"}]}]}], "}"}]}], 
          "\[IndentingNewLine]", "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<dx = \>\"", ",", 
           RowBox[{"MatrixForm", "[", "dx", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"(*", "  ", 
          RowBox[{
          "Calculate", " ", "the", " ", "norm", " ", "of", " ", "the", " ", 
           "Cartesian", " ", "position", " ", "and", " ", "orientation", " ", 
           "errors"}], "  ", "*)"}],
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{
          RowBox[{"dpnorm", "[", "iteration", "]"}], " ", "=", " ", "0"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{
          RowBox[{"dpsinorm", "[", "iteration", "]"}], " ", "=", " ", "0"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{
          StyleBox["For",
           FontSlant->"Plain",
           FontTracking->"Plain",
           FontVariations->{"CompatibilityType"->0,
           "Outline"->False,
           "Shadow"->False,
           "StrikeThrough"->False,
           "Underline"->False},
           FontVariations -> {"Masked" -> False},
           FontVariations -> {"RotationAngle" -> 0}], 
          StyleBox["[",
           FontSlant->"Plain",
           FontTracking->"Plain",
           FontVariations->{"CompatibilityType"->0,
           "Outline"->False,
           "Shadow"->False,
           "StrikeThrough"->False,
           "Underline"->False},
           FontVariations -> {"Masked" -> False},
           FontVariations -> {"RotationAngle" -> 0}], 
          RowBox[{
           StyleBox[
            RowBox[{"i", "=", "1"}],
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[",",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[" ",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[
            RowBox[{"i", "\[LessEqual]", "3"}],
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[",",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[
            RowBox[{"i", "++"}],
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[",",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox["\[IndentingNewLine]",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           RowBox[{
            StyleBox["{",
             FontSlant->"Plain",
             FontTracking->"Plain",
             FontVariations->{"CompatibilityType"->0,
             "Outline"->False,
             "Shadow"->False,
             "StrikeThrough"->False,
             "Underline"->False},
             FontVariations -> {"Masked" -> False},
             FontVariations -> {"RotationAngle" -> 0}], 
            RowBox[{
             RowBox[{
              RowBox[{"dpnorm", "[", "iteration", "]"}], " ", "=", " ", 
              RowBox[{
               RowBox[{"dpnorm", "[", "iteration", "]"}], " ", "+", " ", 
               RowBox[{
                RowBox[{"dp", "[", 
                 RowBox[{"[", 
                  RowBox[{"i", ",", "1"}], "]"}], "]"}], "*", " ", 
                RowBox[{"dp", "[", 
                 RowBox[{"[", 
                  RowBox[{"i", ",", "1"}], "]"}], "]"}]}]}]}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              StyleBox[
               RowBox[{"dpsinorm", "[", "iteration", "]"}],
               FontSlant->"Plain",
               FontTracking->"Plain",
               FontVariations->{"CompatibilityType"->0,
               "Outline"->False,
               "Shadow"->False,
               "StrikeThrough"->False,
               "Underline"->False}], 
              StyleBox[" ",
               FontSlant->"Plain",
               FontTracking->"Plain",
               FontVariations->{"CompatibilityType"->0,
               "Outline"->False,
               "Shadow"->False,
               "StrikeThrough"->False,
               "Underline"->False},
               FontVariations -> {"Masked" -> False},
               FontVariations -> {"RotationAngle" -> 0}], 
              StyleBox["=",
               FontSlant->"Plain",
               FontTracking->"Plain",
               FontVariations->{"CompatibilityType"->0,
               "Outline"->False,
               "Shadow"->False,
               "StrikeThrough"->False,
               "Underline"->False},
               FontVariations -> {"Masked" -> False},
               FontVariations -> {"RotationAngle" -> 0}], 
              StyleBox[" ",
               FontSlant->"Plain",
               FontTracking->"Plain",
               FontVariations->{"CompatibilityType"->0,
               "Outline"->False,
               "Shadow"->False,
               "StrikeThrough"->False,
               "Underline"->False},
               FontVariations -> {"Masked" -> False},
               FontVariations -> {"RotationAngle" -> 0}], 
              RowBox[{
               StyleBox[
                RowBox[{"dpsinorm", "[", "iteration", "]"}],
                FontSlant->"Plain",
                FontTracking->"Plain",
                FontVariations->{"CompatibilityType"->0,
                "Outline"->False,
                "Shadow"->False,
                "StrikeThrough"->False,
                "Underline"->False},
                FontVariations -> {"Masked" -> False},
                FontVariations -> {"RotationAngle" -> 0}], 
               StyleBox[" ",
                FontSlant->"Plain",
                FontTracking->"Plain",
                FontVariations->{"CompatibilityType"->0,
                "Outline"->False,
                "Shadow"->False,
                "StrikeThrough"->False,
                "Underline"->False},
                FontVariations -> {"Masked" -> False},
                FontVariations -> {"RotationAngle" -> 0}], 
               StyleBox[
                RowBox[{
                 StyleBox["+",
                  FontVariations -> {"Masked" -> False},
                  FontVariations -> {"RotationAngle" -> 0}], 
                 StyleBox[" ",
                  FontVariations -> {"Masked" -> False},
                  FontVariations -> {"RotationAngle" -> 0}], 
                 RowBox[{
                  StyleBox["dpsi",
                   FontVariations -> {"Masked" -> False},
                   FontVariations -> {"RotationAngle" -> 0}], 
                  StyleBox["[",
                   FontVariations -> {"Masked" -> False},
                   FontVariations -> {"RotationAngle" -> 0}], 
                  RowBox[{"[", 
                   RowBox[{"i", ",", "1"}], "]"}], 
                  StyleBox["]",
                   FontVariations -> {"Masked" -> False},
                   FontVariations -> {"RotationAngle" -> 0}]}]}],
                FontSlant->"Plain",
                FontTracking->"Plain",
                FontVariations->{"CompatibilityType"->0,
                "Outline"->False,
                "Shadow"->False,
                "StrikeThrough"->False,
                "Underline"->False}], 
               StyleBox["*",
                FontVariations->{"CompatibilityType"->0}], 
               RowBox[{"dpsi", "[", 
                RowBox[{"[", 
                 RowBox[{"i", ",", "1"}], "]"}], "]"}]}]}]}], 
            StyleBox["}",
             FontSlant->"Plain",
             FontTracking->"Plain",
             FontVariations->{"CompatibilityType"->0,
             "Outline"->False,
             "Shadow"->False,
             "StrikeThrough"->False,
             "Underline"->False},
             FontVariations -> {"Masked" -> False},
             FontVariations -> {"RotationAngle" -> 0}]}]}], 
          StyleBox["\[IndentingNewLine]",
           FontSlant->"Plain",
           FontTracking->"Plain",
           FontVariations->{"CompatibilityType"->0,
           "Outline"->False,
           "Shadow"->False,
           "StrikeThrough"->False,
           "Underline"->False},
           FontVariations -> {"Masked" -> False},
           FontVariations -> {"RotationAngle" -> 0}], 
          StyleBox["]",
           FontSlant->"Plain",
           FontTracking->"Plain",
           FontVariations->{"CompatibilityType"->0,
           "Outline"->False,
           "Shadow"->False,
           "StrikeThrough"->False,
           "Underline"->False},
           FontVariations -> {"Masked" -> False},
           FontVariations -> {"RotationAngle" -> 0}]}],
         FontWeight->"Plain",
         FontColor->GrayLevel[0]], 
        StyleBox[" ",
         FontWeight->"Plain",
         FontSlant->"Plain",
         FontTracking->"Plain",
         FontVariations->{"CompatibilityType"->0,
         "Outline"->False,
         "Shadow"->False,
         "StrikeThrough"->False,
         "Underline"->False},
         FontColor->GrayLevel[0],
         FontVariations -> {"Masked" -> False},
         FontVariations -> {"RotationAngle" -> 0}], 
        StyleBox[";",
         FontWeight->"Plain",
         FontSlant->"Plain",
         FontTracking->"Plain",
         FontVariations->{"CompatibilityType"->0,
         "Outline"->False,
         "Shadow"->False,
         "StrikeThrough"->False,
         "Underline"->False},
         FontColor->GrayLevel[0],
         FontVariations -> {"Masked" -> False},
         FontVariations -> {"RotationAngle" -> 0}], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain",
         FontSlant->"Plain",
         FontTracking->"Plain",
         FontVariations->{"CompatibilityType"->0,
         "Outline"->False,
         "Shadow"->False,
         "StrikeThrough"->False,
         "Underline"->False},
         FontColor->GrayLevel[0],
         FontVariations -> {"Masked" -> False},
         FontVariations -> {"RotationAngle" -> 0}], 
        StyleBox[
         RowBox[{
          RowBox[{"dpnorm", "[", "iteration", "]"}], " ", "=", " ", 
          RowBox[{"Sqrt", "[", 
           RowBox[{"dpnorm", "[", "iteration", "]"}], "]"}]}],
         FontWeight->"Plain",
         FontColor->GrayLevel[0]], 
        StyleBox[";",
         FontWeight->"Plain",
         FontColor->GrayLevel[0]], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain",
         FontColor->GrayLevel[0]], 
        StyleBox[
         RowBox[{
          RowBox[{"dpsinorm", "[", "iteration", "]"}], 
          StyleBox[" ",
           FontVariations -> {"Masked" -> False},
           FontVariations -> {"RotationAngle" -> 0}], 
          StyleBox["=",
           FontVariations -> {"Masked" -> False},
           FontVariations -> {"RotationAngle" -> 0}], 
          StyleBox[" ",
           FontVariations -> {"Masked" -> False},
           FontVariations -> {"RotationAngle" -> 0}], 
          StyleBox[
           RowBox[{"Sqrt", "[", 
            RowBox[{"dpsinorm", "[", "iteration", "]"}], "]"}],
           FontVariations -> {"Masked" -> False},
           FontVariations -> {"RotationAngle" -> 0}]}],
         FontWeight->"Plain",
         FontSlant->"Plain",
         FontTracking->"Plain",
         FontVariations->{"CompatibilityType"->0,
         "Outline"->False,
         "Shadow"->False,
         "StrikeThrough"->False,
         "Underline"->False},
         FontColor->GrayLevel[0]], 
        StyleBox[";",
         FontWeight->"Plain",
         FontSlant->"Plain",
         FontTracking->"Plain",
         FontVariations->{"CompatibilityType"->0,
         "Outline"->False,
         "Shadow"->False,
         "StrikeThrough"->False,
         "Underline"->False},
         FontColor->GrayLevel[0],
         FontVariations -> {"Masked" -> False},
         FontVariations -> {"RotationAngle" -> 0}], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain",
         FontVariations->{"CompatibilityType"->0},
         FontColor->GrayLevel[0]], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<dpos error = \>\"", ",", 
           RowBox[{"dpnorm", "[", "iteration", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<dpsi error = \>\"", ",", 
           RowBox[{"dpsinorm", "[", "iteration", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"(*", "  ", 
          RowBox[{
           RowBox[{"STEP", " ", "3"}], ":", "  ", 
           RowBox[{
           "Find", " ", "the", " ", "Jacobian", " ", "for", " ", "current", 
            " ", "joint", " ", "angles", "\[IndentingNewLine]", 
            RowBox[{"NOTE", ":", "  ", 
             RowBox[{
             "You", " ", "have", " ", "to", " ", "change", " ", "this", " ", 
              "next", " ", "line", " ", "if", " ", "your", " ", "variables", 
              " ", "include", " ", 
              RowBox[{
               RowBox[{"d", "[", "i", "]"}], "'"}], "s"}]}]}]}], "  ", "*)"}],
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"J0current", " ", "=", " ", 
          RowBox[{"J0", " ", "//.", " ", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"\[Theta]", "[", "1", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "2", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"2", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "3", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"3", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "4", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"4", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "5", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"5", ",", "1"}], "]"}], "]"}]}], ",", 
             RowBox[{
              RowBox[{"\[Theta]", "[", "6", "]"}], "\[Rule]", 
              RowBox[{"q", "[", 
               RowBox[{"[", 
                RowBox[{"6", ",", "1"}], "]"}], "]"}]}]}], "}"}]}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<J0current = \>\"", ",", " ", 
           RowBox[{"MatrixForm", "[", "J0current", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"(*", "  ", 
          RowBox[{
           RowBox[{"STEP", " ", "4"}], ":", "  ", 
           RowBox[{
           "Find", " ", "the", " ", "approximate", " ", "change", " ", "in", 
            " ", "the", " ", "joint", " ", "angles", " ", "to", " ", "get", 
            " ", "to", " ", "desired", " ", "Cartesian", " ", "pose"}], ":", 
           "\[IndentingNewLine]", 
           RowBox[{
           "use", " ", "the", " ", "robust", " ", "pseudoinverse", " ", "of", 
            " ", "J", " ", "in", " ", "case", " ", "it", " ", "is", " ", 
            "singular"}]}], " ", "*)"}],
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Jinv", "=", 
          RowBox[{"PseudoInverse", "[", "J0current", "]"}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"dq", " ", "=", " ", 
          RowBox[{"Jinv", ".", "dx"}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"(*", "  ", 
          RowBox[{
           RowBox[{"STEP", " ", "5"}], ":", "  ", 
           RowBox[{"Update", " ", "the", " ", "joint", " ", "angles"}]}], 
          "  ", "*)"}],
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"q", " ", "=", " ", 
          RowBox[{"q", " ", "+", " ", "dq"}]}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<q = \>\"", ",", 
           RowBox[{"MatrixForm", "[", "q", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{"(*", "  ", 
          RowBox[{
           RowBox[{"STEP", " ", "6"}], ":", "  ", 
           RowBox[{
           "Calculate", " ", "the", " ", "norm", " ", "of", " ", "the", " ", 
            "joint", " ", "angle", " ", "change"}]}], "  ", "*)"}],
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{
          RowBox[{"dqnorm", "[", "iteration", "]"}], " ", "=", " ", "0"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], "\[IndentingNewLine]", 
        StyleBox[
         RowBox[{
          StyleBox["For",
           FontSlant->"Plain",
           FontTracking->"Plain",
           FontVariations->{"CompatibilityType"->0,
           "Outline"->False,
           "Shadow"->False,
           "StrikeThrough"->False,
           "Underline"->False},
           FontVariations -> {"Masked" -> False},
           FontVariations -> {"RotationAngle" -> 0}], 
          StyleBox["[",
           FontSlant->"Plain",
           FontTracking->"Plain",
           FontVariations->{"CompatibilityType"->0,
           "Outline"->False,
           "Shadow"->False,
           "StrikeThrough"->False,
           "Underline"->False},
           FontVariations -> {"Masked" -> False},
           FontVariations -> {"RotationAngle" -> 0}], 
          RowBox[{
           StyleBox[
            RowBox[{"i", "=", "1"}],
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[",",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[" ",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[
            RowBox[{"i", "\[LessEqual]", "DOF"}],
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[",",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[
            RowBox[{"i", "++"}],
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox[",",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           StyleBox["\[IndentingNewLine]",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], 
           RowBox[{
            RowBox[{
             StyleBox["dqnorm",
              FontSlant->"Plain",
              FontTracking->"Plain",
              FontVariations->{"CompatibilityType"->0,
              "Outline"->False,
              "Shadow"->False,
              "StrikeThrough"->False,
              "Underline"->False},
              FontVariations -> {"Masked" -> False},
              FontVariations -> {"RotationAngle" -> 0}], "[", "iteration", 
             "]"}], " ", "=", " ", 
            RowBox[{
             RowBox[{"dqnorm", "[", "iteration", "]"}], " ", "+", " ", 
             RowBox[{
              RowBox[{"dq", "[", 
               RowBox[{"[", 
                RowBox[{"i", ",", "1"}], "]"}], "]"}], "*", 
              RowBox[{"dq", "[", 
               RowBox[{"[", 
                RowBox[{"i", ",", "1"}], "]"}], "]"}]}]}]}]}], 
          "\[IndentingNewLine]", "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain"], 
        StyleBox[
         RowBox[{
          RowBox[{
           StyleBox["dqnorm",
            FontSlant->"Plain",
            FontTracking->"Plain",
            FontVariations->{"CompatibilityType"->0,
            "Outline"->False,
            "Shadow"->False,
            "StrikeThrough"->False,
            "Underline"->False},
            FontVariations -> {"Masked" -> False},
            FontVariations -> {"RotationAngle" -> 0}], "[", "iteration", 
           "]"}], " ", "=", 
          RowBox[{"Sqrt", "[", 
           RowBox[{"dqnorm", "[", "iteration", "]"}], "]"}]}],
         FontWeight->"Plain",
         FontColor->GrayLevel[0]], 
        StyleBox[";",
         FontWeight->"Plain",
         FontColor->GrayLevel[0]], 
        StyleBox["\[IndentingNewLine]",
         FontWeight->"Plain",
         FontColor->GrayLevel[0]], 
        StyleBox[
         RowBox[{"Print", "[", 
          RowBox[{"\"\<q error = \>\"", ",", 
           RowBox[{"dqnorm", "[", "iteration", "]"}]}], "]"}],
         FontWeight->"Plain"], 
        StyleBox[" ",
         FontWeight->"Plain"], 
        StyleBox[";",
         FontWeight->"Plain"]}], 
       StyleBox["\[IndentingNewLine]",
        FontWeight->"Plain"], 
       StyleBox["}",
        FontWeight->"Plain"]}]}], "\[IndentingNewLine]", 
     StyleBox["]",
      FontWeight->"Plain",
      FontSlant->"Plain",
      FontTracking->"Plain",
      FontVariations->{"CompatibilityType"->0,
      "Outline"->False,
      "Shadow"->False,
      "StrikeThrough"->False,
      "Underline"->False},
      FontVariations -> {"Masked" -> False},
      FontVariations -> {"RotationAngle" -> 0}]}], 
    StyleBox[";",
     FontWeight->"Plain",
     FontSlant->"Plain",
     FontTracking->"Plain",
     FontVariations->{"CompatibilityType"->0,
     "Outline"->False,
     "Shadow"->False,
     "StrikeThrough"->False,
     "Underline"->False},
     FontVariations -> {"Masked" -> False},
     FontVariations -> {"RotationAngle" -> 0}]}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{{3.46887369239244*^9, 3.468873721358902*^9}, {
   3.4692835374374723`*^9, 3.469283591010433*^9}, 3.4692836356393137`*^9, {
   3.4693177017367067`*^9, 3.469317890585725*^9}, 3.469317936953815*^9, {
   3.46935739046494*^9, 3.469357410264736*^9}, {3.469357709078054*^9, 
   3.469357855240553*^9}, {3.4693578928947897`*^9, 3.469357893628747*^9}, {
   3.469358002677268*^9, 3.469358004152214*^9}, {3.595759812994376*^9, 
   3.5957598441995287`*^9}, {3.5957598775513487`*^9, 3.595759916127*^9}, {
   3.595760077149919*^9, 3.59576015664111*^9}, {3.718095615349704*^9, 
   3.7180956463547*^9}, {3.7848036719668427`*^9, 3.784803717738987*^9}, {
   3.7848037511977577`*^9, 3.784803766563308*^9}, 3.7848038275034513`*^9, {
   3.8063320562314262`*^9, 
   3.8063321310495434`*^9}},ExpressionUUID->"07e20afa-835a-4397-8d71-\
4c21f4ffb8e6"]
},
WindowSize->{759, 1636},
WindowMargins->{{Automatic, -2198}, {225, Automatic}},
FrontEndVersion->"12.0 for Microsoft Windows (64-bit) (April 8, 2019)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 26412, 762, 1492, "Input",ExpressionUUID->"079748e6-0c27-499e-9e7f-feb9e37b6581"],
Cell[26973, 784, 151, 3, 28, "Input",ExpressionUUID->"0575eaf9-9f08-4dc9-9106-ae698354c237"],
Cell[27127, 789, 42497, 1161, 1435, "Input",ExpressionUUID->"07e20afa-835a-4397-8d71-4c21f4ffb8e6"]
}
]
*)

